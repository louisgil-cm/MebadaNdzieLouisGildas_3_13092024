<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="sorting">
        <label for="sortOptions">Trier par :</label>
        <select id="sortOptions">
            <option value="popularite">Popularité</option>
            <option value="date">Date</option>
            <option value="titre">Titre</option>
        </select>
    </div>
    <script>
        // Ajout des événements pour le menu de tri
        function attacherSortingEvent() {
            const sortOptions = document.getElementById("sortOptions");
            sortOptions.addEventListener("change", () => {
                afficherGaleriePhotographe();
            });
        }

        // Fonction pour trier les médias
        function trierMedias(medias, critere) {
            switch (critere) {
                case "popularite":
                    return medias.sort((a, b) => b.likes - a.likes);
                case "date":
                    return medias.sort((a, b) => new Date(b.date) - new Date(a.date)); 
                case "titre":
                    return medias.sort((a, b) => a.title.localeCompare(b.title)); 
                default:
                    return medias; // Pas de tri par défaut
            }
        }

        // Affichage des médias du photographe dans la galerie 
        function afficherGaleriePhotographe() {
            const gallerySection = document.querySelector("#photographerGallery .media");
            gallerySection.innerHTML = "";
            const photographerMedia = recupererMediasPhotographe();

            // Récupérer le critère de tri sélectionné
            const sortOptions = document.getElementById("sortOptions");
            const selectedSort = sortOptions.value;

            // Trier les médias en fonction du critère sélectionné
            const sortedMedia = trierMedias(photographerMedia, selectedSort);

            sortedMedia.forEach(media => {
                const mediaElement = document.createElement("div");
                mediaElement.classList.add("galleryItem");

                let likesContainer, likesElement, likeButton;

                if (media.typeMedia === "video") {
                    const videoElement = document.createElement("video");
                    videoElement.src = media.video;
                    videoElement.controls = true;

                    const footerElement = document.createElement("footer");
                    const titleElement = document.createElement("h3");
                    titleElement.innerText = media.title;

                    likesContainer = document.createElement("span");
                    likesElement = document.createElement("strong");
                    likesElement.innerText = media.likes;
                    likesElement.classList.add("likes");

                    likeButton = document.createElement("button");
                    likeButton.innerText = "♥";

                    likesContainer.appendChild(likesElement);
                    likesContainer.appendChild(likeButton);
                    footerElement.appendChild(titleElement);
                    footerElement.appendChild(likesContainer);

                    mediaElement.appendChild(videoElement);
                    mediaElement.appendChild(footerElement);

                } else {
                    const imageElement = document.createElement("img");
                    imageElement.src = media.image;
                    imageElement.alt = media.title;

                    const footerElement = document.createElement("footer");
                    const titleElement = document.createElement("h3");
                    titleElement.innerText = media.title;

                    likesContainer = document.createElement("span");
                    likesElement = document.createElement("strong");
                    likesElement.innerText = media.likes;
                    likesElement.classList.add("likes");

                    likeButton = document.createElement("button");
                    likeButton.innerText = "♥";

                    likesContainer.appendChild(likesElement);
                    likesContainer.appendChild(likeButton);
                    footerElement.appendChild(titleElement);
                    footerElement.appendChild(likesContainer);

                    mediaElement.appendChild(imageElement);
                    mediaElement.appendChild(footerElement);
                }

                // appel de la fonction des likes
                Likes(media, likeButton, likesElement);

                gallerySection.appendChild(mediaElement);
            });
        }

        // Charger les données des photographes et des médias
        loadPhotographersData();
        attacherSortingEvent();  // Attacher les événements de tri lors du chargement

    </script>
</body>
</html>